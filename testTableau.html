<!DOCTYPE html>
<html>

<head>
    <title>Healthcare Ecosystems</title>

    <script type="text/javascript"
	    src="https://public.tableau.com/javascripts/api/tableau-2.min.js"></script>
    <script type="text/javascript">
        function initViz() {
			var vars = {};
    		var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        		vars[key] = value;
    		});

			console.log(vars)

            var containerDiv = document.getElementById("vizContainer"),
                url = "https://prod-apnortheast-a.online.tableau.com/t/testtableauhes/views/CaseStudy2_0/Dashboard1?:showAppBanner=false&:display_count=n&:showVizHome=n&:origin=viz_share_link",
                options = {
                    width: (window.innerWidth - 40),
                    height: window.innerHeight,
                    hideTabs: true,
                    hideToolbar: true,
                    onFirstInteractive: function () {
                        console.log("Run this code when the viz has finished loading.");
                    }
                };

				if (vars.hasOwnProperty('Market')) {
					options.Market = vars['Market']
				}
				else {
					options.Market = ""
				}

				if (vars.hasOwnProperty('Brand')) {
					options.Brand = vars['Brand']
				}
				else {
					options.Brand = ""
				}

				

            var viz = new tableau.Viz(containerDiv, url, options);
			console.log(options)



             
            // Create a viz object and embed it in the container div.
        }
    </script>
</head>

<body onload="initViz();">
    <div id="vizContainer"></div>
</body>

</html>